(()=>{var e={};e.id=405,e.ids=[405,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},370:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>E,default:()=>l,getServerSideProps:()=>y,getStaticPaths:()=>p,getStaticProps:()=>g,reportWebVitals:()=>m,routeModule:()=>j,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>R,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>S});var r=s(7093),a=s(5244),o=s(1323),u=s(2899),d=s.n(u),i=s(6958),c=s.n(i),n=s(2285);let l=(0,o.l)(n,"default"),g=(0,o.l)(n,"getStaticProps"),p=(0,o.l)(n,"getStaticPaths"),y=(0,o.l)(n,"getServerSideProps"),E=(0,o.l)(n,"config"),m=(0,o.l)(n,"reportWebVitals"),S=(0,o.l)(n,"unstable_getStaticProps"),f=(0,o.l)(n,"unstable_getStaticPaths"),b=(0,o.l)(n,"unstable_getStaticParams"),P=(0,o.l)(n,"unstable_getServerProps"),R=(0,o.l)(n,"unstable_getServerSideProps"),j=new r.PagesRouteModule({definition:{kind:a.x.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:c(),Document:d()},userland:n})},6358:(e,t,s)=>{"use strict";let r=s(4205);t.createAccessory=(e,t)=>{let s=e.body;r.create(s,(e,s)=>{e?t.status(500).json({error:e.message}):t.status(201).json(s)})},t.getAllAccessories=(e,t)=>{r.getAll((e,s)=>{e?t.status(500).json({error:e.message}):t.status(200).json(s)})},t.getAccessoryById=(e,t)=>{let s=e.params.id;r.getById(s,(e,s)=>{e?t.status(500).json({error:e.message}):s?t.status(200).json(s):t.status(404).json({message:"Accessory not found"})})},t.updateAccessory=(e,t)=>{let s=e.params.id,a=e.body;r.updateById(s,a,(e,s)=>{e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Accessory not found"}):t.status(200).json(s)})},t.deleteAccessory=(e,t)=>{let s=e.params.id;r.deleteById(s,(e,s)=>{e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Accessory not found"}):t.status(204).json({message:"Accessory deleted"})})}},1320:(e,t,s)=>{"use strict";let r=s(2744);s(5142).config();let a=r.createConnection({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME});a.connect(e=>{if(e)throw e;console.log("MySQL connected...")}),t.getAllBeds=(e,t)=>{a.query("SELECT * FROM Beds",(e,s)=>{if(e)throw e;t.json(s)})},t.getBedById=(e,t)=>{a.query("SELECT * FROM Beds WHERE id = ?",[e.params.id],(e,s)=>{if(e)throw e;t.json(s)})},t.createBed=(e,t)=>{let s=e.body;a.query("INSERT INTO Beds SET ?",s,(e,r)=>{if(e)throw e;t.json({id:r.insertId,...s})})},t.updateBed=(e,t)=>{let s=e.body;a.query("UPDATE Beds SET ? WHERE id = ?",[s,e.params.id],(r,a)=>{if(r)throw r;t.json({id:e.params.id,...s})})},t.deleteBed=(e,t)=>{a.query("DELETE FROM Beds WHERE id = ?",[e.params.id],(e,s)=>{if(e)throw e;t.json({message:"Bed deleted successfully"})})}},6889:(e,t,s)=>{"use strict";let r=s(8195),a=s(1738),o=s(1017),u=a.diskStorage({destination:function(e,t,s){s(null,"assets/")},filename:function(e,t,s){s(null,`${Date.now()}_${o.basename(t.originalname)}`)}});a({storage:u}),t.getAllCategories=(e,t)=>{r.query("SELECT * FROM categories",(e,s)=>{if(e)throw e;t.json(s)})},t.createCategory=(e,t)=>{let{name:s,created_date:a}=e.body,o=e.file?e.file.path:null;r.query("INSERT INTO categories (name, image_path, created_date) VALUES (?, ?, ?)",[s,o,a],(e,s)=>{if(e)throw e;t.status(201).send("Category created successfully")})},t.updateCategory=(e,t)=>{let s=e.params.id,{name:a,created_date:o}=e.body,u=e.file?e.file.path:null,d="UPDATE categories SET name = ?, created_date = ?",i=[a,o];u&&(d+=", image_path = ?",i.push(u)),d+=" WHERE id = ?",i.push(s),r.query(d,i,(e,s)=>{if(e)throw e;t.send("Category updated successfully")})},t.deleteCategory=(e,t)=>{let s=e.params.id;r.query("DELETE FROM categories WHERE id = ?",[s],(e,s)=>{if(e)throw e;t.send("Category deleted successfully")})},e.exports=t},4271:(e,t,s)=>{"use strict";let r=s(8195);t.login=(e,t)=>{let{username:s,password:a}=e.body;r.query("SELECT * FROM users WHERE username = ?",[s],(e,s)=>{if(e){console.error("Error executing MySQL query:",e),t.status(500).json({message:"Internal Server Error"});return}if(0===s.length){t.status(401).json({message:"Unauthorized"});return}s[0].password===a?t.status(200).json({message:"Login successful"}):t.status(401).json({message:"Unauthorized"})})}},3922:(e,t,s)=>{"use strict";let r=s(8195);t.getAllMattresses=(e,t)=>{r.query("SELECT * FROM Mattresses",(e,s)=>{if(e)return t.status(500).json({error:e.message});t.status(200).json(s)})},t.getMattressById=(e,t)=>{let{id:s}=e.params;r.query("SELECT * FROM Mattresses WHERE id = ?",[s],(e,s)=>e?t.status(500).json({error:e.message}):0===s.length?t.status(404).json({message:"Mattress not found"}):void t.status(200).json(s[0]))},t.createMattress=(e,t)=>{let{name:s,price:a,discount:o,category:u,size:d,image:i,hoverImage:c,description:n,firmness:l,Type:g}=e.body;r.query("INSERT INTO Mattresses (name, price, discount, category, size, image, hoverImage, description, firmness, Type ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)",[s,a,o,u,d,i,c,n,l,g],(e,s)=>{if(e)return t.status(500).json({error:e.message});t.status(201).json({message:"Mattress created successfully",id:s.insertId})})},t.updateMattress=(e,t)=>{let{id:s}=e.params,{name:a,price:o,discount:u,category:d,size:i,image:c,hoverImage:n,description:l,firmness:g,Type:p}=e.body;r.query("UPDATE Mattresses SET name = ?, price = ?, discount = ?, category = ?, size = ?, image = ?, hoverImage = ?, description = ?, firmness = ? WHERE id = ?,Type =?",[a,o,u,d,i,c,n,l,g,p,s],(e,s)=>e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Mattress not found"}):void t.status(200).json({message:"Mattress updated successfully"}))},t.deleteMattress=(e,t)=>{let{id:s}=e.params;r.query("DELETE FROM Mattresses WHERE id = ?",[s],(e,s)=>e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Mattress not found"}):void t.status(200).json({message:"Mattress deleted successfully"}))}},6894:(e,t,s)=>{"use strict";let r=s(8195);t.getAllNestedSubcategories=(e,t)=>{r.query("SELECT * FROM Nested_Subcategories",(e,s)=>{if(e)throw e;t.json(s)})},t.createNestedSubcategory=(e,t)=>{let{name:s,subcategoryId:a}=e.body;r.query("INSERT INTO Nested_Subcategories (name, subcategory_id) VALUES (?, ?)",[s,a],(e,s)=>{if(e)throw e;t.status(201).send("Nested subcategory created successfully")})},t.updateNestedSubcategory=(e,t)=>{let s=e.params.id,{name:a,subcategoryId:o}=e.body;r.query("UPDATE Nested_Subcategories SET name = ?, subcategory_id = ? WHERE id = ?",[a,o,s],(e,s)=>{if(e)throw e;t.send("Nested subcategory updated successfully")})},t.deleteNestedSubcategory=(e,t)=>{let s=e.params.id;r.query("DELETE FROM Nested_Subcategories WHERE id = ?",[s],(e,s)=>{if(e)throw e;t.send("Nested subcategory deleted successfully")})}},7169:(e,t,s)=>{"use strict";let r=s(8195);t.createProduct=(e,t)=>{r.query("INSERT INTO products (name,description, price, image_url, discount, discount_price, category_id, subcategory_id, nested_subcategory_id) VALUES (?,?,?,?,?,?,?,?,?)",[name,description,price,image_url,discount,discount_price,categoryId,subcategoryId,nestedSubcategoryId],(e,s)=>{e?t.status(500).json({error:e.message}):t.status(201).json({message:"Product created successfully",productId:s.insertId})})},t.getAllProducts=(e,t)=>{r.query("SELECT * FROM products",(e,s)=>{e?t.status(500).json({error:e.message}):t.status(200).json(s)})},t.getProductById=(e,t)=>{let s=e.params.id;r.query("SELECT * FROM products WHERE id = ?",[s],(e,s)=>{e?t.status(500).json({error:e.message}):0===s.length?t.status(404).json({message:"Product not found"}):t.status(200).json(s[0])})},t.updateProductById=(e,t)=>{let s=e.params.id,{name:a,description:o,price:u,image_url:d,discount:i,discount_price:c,category_id:n,subcategory_id:l,nested_subcategory_id:g}=e.body;r.query("UPDATE products SET name=?, description=?, price=?, image_url=?, discount=?, discount_price=?, category_id=?, subcategory_id=?, nested_subcategory_id=? WHERE id=?",[a,o,u,d,i,c,n,l,g,s],(e,s)=>{e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Product not found"}):t.status(200).json({message:"Product updated successfully"})})},t.deleteProductById=(e,t)=>{let s=e.params.id;r.query("DELETE FROM products WHERE id=?",[s],(e,s)=>{e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Product not found"}):t.status(200).json({message:"Product deleted successfully"})})},t.getProductsByCategory=(e,t)=>{let s=e.params.categoryId;r.query("SELECT * FROM Products WHERE category_id = ?",[s],(e,s)=>{if(e)throw e;t.json(s)})},t.getProductsBySubcategory=(e,t)=>{let s=e.params.subcategoryId;r.query("SELECT * FROM Products WHERE subcategory_id = ?",[s],(e,s)=>{if(e)throw e;t.json(s)})},t.getProductsByNestedSubcategory=(e,t)=>{let s=e.params.nestedSubcategoryId;r.query("SELECT * FROM Products WHERE nested_subcategory_id = ?",[s],(e,s)=>{if(e)throw e;t.json(s)})}},2072:(e,t,s)=>{"use strict";let r=s(2308);e.exports={getAllSales:(e,t)=>{r.getAll((e,s)=>{e?t.status(500).json({error:e}):t.status(200).json(s)})},getSaleById:(e,t)=>{let{id:s}=e.params;r.getById(s,(e,s)=>{e?t.status(500).json({error:e}):0===s.length?t.status(404).json({message:"Sale not found"}):t.status(200).json(s[0])})},createSale:(e,t)=>{let s=e.body;r.create(s,(e,r)=>{e?t.status(500).json({error:e}):t.status(201).json({id:r.insertId,...s})})},updateSale:(e,t)=>{let{id:s}=e.params,a=e.body;r.update(s,a,e=>{e?t.status(500).json({error:e}):t.status(200).json({message:"Sale updated successfully"})})},deleteSale:(e,t)=>{let{id:s}=e.params;r.delete(s,e=>{e?t.status(500).json({error:e}):t.status(200).json({message:"Sale deleted successfully"})})}}},4353:(e,t,s)=>{"use strict";let r=s(8195);t.getAllSubcategories=(e,t)=>{r.query("SELECT * FROM Subcategories",(e,s)=>{if(e)throw e;t.json(s)})},t.createSubcategory=(e,t)=>{let{name:s,categoryId:a}=e.body;r.query("INSERT INTO Subcategories (name, category_id) VALUES (?, ?)",[s,a],(e,s)=>{if(e)throw e;t.status(201).send("Subcategory created successfully")})},t.updateSubcategory=(e,t)=>{let s=e.params.id,{name:a,categoryId:o}=e.body;r.query("UPDATE Subcategories SET name = ?, category_id = ? WHERE id = ?",[a,o,s],(e,s)=>{if(e)throw e;t.send("Subcategory updated successfully")})},t.deleteSubcategory=(e,t)=>{let s=e.params.id;r.query("DELETE FROM Subcategories WHERE id = ?",[s],(e,s)=>{if(e)throw e;t.send("Subcategory deleted successfully")})}},8195:(e,t,s)=>{"use strict";s(5142).config();let r=s(2744).createConnection({host:process.env.DB_HOST,user:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB_NAME});r.connect(e=>{if(e)throw e;console.log("Connected to MySQL database")}),e.exports=r},4205:(e,t,s)=>{"use strict";let r=s(8195);e.exports={create:(e,t)=>{r.query("INSERT INTO accessories (name, description, quantity, created_date, updated_date, star, price, actual_price, discount, title, image, hoverImage, brand, Type) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[e.name,e.description,e.quantity,new Date,new Date,e.star,e.price,e.actual_price,e.discount,e.title,e.image,e.hoverImage,e.brand,e.Type],(e,s,r)=>e?t(e):t(null,s))},getAll:e=>{r.query("SELECT * FROM accessories",(t,s,r)=>t?e(t):e(null,s))},getById:(e,t)=>{r.query("SELECT * FROM accessories WHERE id = ?",[e],(e,s,r)=>e?t(e):t(null,s[0]))},updateById:(e,t,s)=>{r.query("UPDATE accessories SET name = ?, description = ?, quantity = ?, updated_date = ?, star = ?, price = ?, actual_price = ?, discount = ?, title = ?, image = ?, hoverImage = ?, brand = ?, Type = ? WHERE id = ?",[t.name,t.description,t.quantity,new Date,t.star,t.price,t.actual_price,t.discount,t.title,t.image,t.hoverImage,t.brand,t.Type,e],(e,t,r)=>e?s(e):s(null,t))},deleteById:(e,t)=>{r.query("DELETE FROM accessories WHERE id = ?",[e],(e,s,r)=>e?t(e):t(null,s))}}},2308:(e,t,s)=>{"use strict";let r=s(8195);e.exports={getAll:e=>{r.query("SELECT * FROM sale",e)},getById:(e,t)=>{r.query("SELECT * FROM sale WHERE id = ?",[e],t)},create:(e,t)=>{r.query("INSERT INTO sale SET ?",e,t)},update:(e,t,s)=>{r.query("UPDATE sale SET ? WHERE id = ?",[t,e],s)},delete:(e,t)=>{r.query("DELETE FROM sale WHERE id = ?",[e],t)}}},4995:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(6358);r.get("/",a.getAllAccessories),r.get("/:id",a.getAccessoryById),r.post("/",a.createAccessory),r.put("/:id",a.updateAccessory),r.delete("/:id",a.deleteAccessory),e.exports=r},9239:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(1320);r.get("/",a.getAllBeds),r.get("/:id",a.getBedById),r.post("/",a.createBed),r.put("/:id",a.updateBed),r.delete("/:id",a.deleteBed),e.exports=r},4110:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(6889),o=s(1738),u=s(1017),d=o.diskStorage({destination:function(e,t,s){s(null,"public/")},filename:function(e,t,s){s(null,`${Date.now()}_${u.basename(t.originalname)}`)}}),i=o({storage:d});r.get("/categories",a.getAllCategories),r.post("/categories",i.single("image"),a.createCategory),r.put("/categories/:id",i.single("image"),a.updateCategory),r.delete("/categories/:id",a.deleteCategory),e.exports=r},2155:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(4271);r.post("/login",a.login),e.exports=r},8009:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(3922);r.get("/",a.getAllMattresses),r.get("/:id",a.getMattressById),r.post("/",a.createMattress),r.put("/:id",a.updateMattress),r.delete("/:id",a.deleteMattress),e.exports=r},3312:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(6894);r.get("/nestedsubcategories",a.getAllNestedSubcategories),r.post("nestedsubcategories",a.createNestedSubcategory),r.put("/nestedsubcategories/:id",a.updateNestedSubcategory),r.delete("/nestedsubcategories/:id",a.deleteNestedSubcategory),e.exports=r},3819:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(7169);r.post("/products",a.createProduct),r.get("/products",a.getAllProducts),r.get("/products/:id",a.getProductById),r.put("/products/:id",a.updateProductById),r.delete("/products/:id",a.deleteProductById),e.exports=r},4826:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(2072);r.get("/",a.getAllSales),r.get("/:id",a.getSaleById),r.post("/",a.createSale),r.put("/:id",a.updateSale),r.delete("/:id",a.deleteSale),e.exports=r},4195:(e,t,s)=>{"use strict";let r=s(6860).Router(),a=s(4353);r.get("/subcategories",a.getAllSubcategories),r.post("/subcategories",a.createSubcategory),r.put("/subcategories/:id",a.updateSubcategory),r.delete("/subcategories/:id",a.deleteSubcategory),e.exports=r},6958:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=s(167),a=s(997),o=r._(s(6689)),u=s(7201);async function d(e){let{Component:t,ctx:s}=e;return{pageProps:await (0,u.loadGetInitialProps)(t,s)}}class i extends o.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,a.jsx)(e,{...t})}}i.origGetInitialProps=d,i.getInitialProps=d,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2285:(e,t,s)=>{let r=s(6860),a=s(3986);s(5142).config();let{swaggerUi:o,specs:u}=s(9995),d=s(3819),i=s(4110),c=s(4195),n=s(3312),l=s(2155),g=s(8009),p=s(9239),y=s(4995),E=s(4826),m=s(3582),S=s(8174)(process.env.STRIPE_SECRET_KEY),f=r(),b=process.env.PORT||5e3;f.use(a.json()),f.use(m({origin:"*",credentials:!0,optionsSuccessStatus:200}));let P="/api/v1";f.use("/api-docs",o.serve,o.setup(u)),f.use(P+"/products",d),f.use(P+"/categories",i),f.use(P+"/subcategories",c),f.use(P+"/nestedsubcategories",n),f.use(P+"/auth",l),f.use(P+"/mattresses",g),f.use(P+"/beds",p),f.use(P+"/accessories",y),f.use(P+"/sales",E),f.post(`${P}/payment`,async(e,t)=>{let{paymentMethodId:s,amount:r,currency:a,paymentId:o,billingDetails:u}=e.body;try{let e=await S.paymentIntents.create({amount:r,currency:a,payment_method:s,description:`Payment for Payment ID: ${o}`,confirm:!0,metadata:{paymentId:o},receipt_email:u.email});t.status(200).json({success:!0,message:"Payment processed successfully",paymentIntent:e})}catch(e){t.status(400).json({success:!1,message:`Payment failed: ${e.message}`})}}),f.listen(b,()=>{console.log(`Server is running on port ${b}`)})},9995:(e,t,s)=>{"use strict";let r=s(7777),a=s(9948),o=r({swaggerDefinition:{openapi:"3.0.0",info:{title:"Your API Documentation",version:"1.0.0",description:"Documentation for your APIs"},servers:[{url:"http://localhost:5000",description:"Development server"}]},apis:["./routes/*.js"]});e.exports={swaggerUi:a,specs:o}},5244:(e,t)=>{"use strict";var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},3986:e=>{"use strict";e.exports=require("body-parser")},3582:e=>{"use strict";e.exports=require("cors")},5142:e=>{"use strict";e.exports=require("dotenv")},6860:e=>{"use strict";e.exports=require("express")},1738:e=>{"use strict";e.exports=require("multer")},2744:e=>{"use strict";e.exports=require("mysql")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},8174:e=>{"use strict";e.exports=require("stripe")},7777:e=>{"use strict";e.exports=require("swagger-jsdoc")},9948:e=>{"use strict";e.exports=require("swagger-ui-express")},1017:e=>{"use strict";e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[899],()=>s(370));module.exports=r})();