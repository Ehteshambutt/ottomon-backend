(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{18967:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=18967,e.exports=t},75557:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(92285)}])},36358:function(e,t,s){"use strict";let r=s(54205);t.createAccessory=(e,t)=>{let s=e.body;r.create(s,(e,s)=>{e?t.status(500).json({error:e.message}):t.status(201).json(s)})},t.getAllAccessories=(e,t)=>{r.getAll((e,s)=>{e?t.status(500).json({error:e.message}):t.status(200).json(s)})},t.getAccessoryById=(e,t)=>{let s=e.params.id;r.getById(s,(e,s)=>{e?t.status(500).json({error:e.message}):s?t.status(200).json(s):t.status(404).json({message:"Accessory not found"})})},t.updateAccessory=(e,t)=>{let s=e.params.id,o=e.body;r.updateById(s,o,(e,s)=>{e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Accessory not found"}):t.status(200).json(s)})},t.deleteAccessory=(e,t)=>{let s=e.params.id;r.deleteById(s,(e,s)=>{e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Accessory not found"}):t.status(204).json({message:"Accessory deleted"})})}},71320:function(e,t,s){"use strict";var r=s(83454);let o=s(4426);s(59738).config();let a=o.createConnection({host:r.env.DB_HOST,user:r.env.DB_USER,password:r.env.DB_PASSWORD,database:r.env.DB_NAME});a.connect(e=>{if(e)throw e;console.log("MySQL connected...")}),t.getAllBeds=(e,t)=>{a.query("SELECT * FROM Beds",(e,s)=>{if(e)throw e;t.json(s)})},t.getBedById=(e,t)=>{a.query("SELECT * FROM Beds WHERE id = ?",[e.params.id],(e,s)=>{if(e)throw e;t.json(s)})},t.createBed=(e,t)=>{let s=e.body;a.query("INSERT INTO Beds SET ?",s,(e,r)=>{if(e)throw e;t.json({id:r.insertId,...s})})},t.updateBed=(e,t)=>{let s=e.body;a.query("UPDATE Beds SET ? WHERE id = ?",[s,e.params.id],(r,o)=>{if(r)throw r;t.json({id:e.params.id,...s})})},t.deleteBed=(e,t)=>{a.query("DELETE FROM Beds WHERE id = ?",[e.params.id],(e,s)=>{if(e)throw e;t.json({message:"Bed deleted successfully"})})}},96889:function(e,t,s){"use strict";let r=s(58195),o=s(51370),a=s(1864),u=o.diskStorage({destination:function(e,t,s){s(null,"assets/")},filename:function(e,t,s){s(null,"".concat(Date.now(),"_").concat(a.basename(t.originalname)))}});o({storage:u}),t.getAllCategories=(e,t)=>{r.query("SELECT * FROM categories",(e,s)=>{if(e)throw e;t.json(s)})},t.createCategory=(e,t)=>{let{name:s,created_date:o}=e.body,a=e.file?e.file.path:null;r.query("INSERT INTO categories (name, image_path, created_date) VALUES (?, ?, ?)",[s,a,o],(e,s)=>{if(e)throw e;t.status(201).send("Category created successfully")})},t.updateCategory=(e,t)=>{let s=e.params.id,{name:o,created_date:a}=e.body,u=e.file?e.file.path:null,c="UPDATE categories SET name = ?, created_date = ?",d=[o,a];u&&(c+=", image_path = ?",d.push(u)),c+=" WHERE id = ?",d.push(s),r.query(c,d,(e,s)=>{if(e)throw e;t.send("Category updated successfully")})},t.deleteCategory=(e,t)=>{let s=e.params.id;r.query("DELETE FROM categories WHERE id = ?",[s],(e,s)=>{if(e)throw e;t.send("Category deleted successfully")})},e.exports=t},74271:function(e,t,s){"use strict";let r=s(58195);t.login=(e,t)=>{let{username:s,password:o}=e.body;r.query("SELECT * FROM users WHERE username = ?",[s],(e,s)=>{if(e){console.error("Error executing MySQL query:",e),t.status(500).json({message:"Internal Server Error"});return}if(0===s.length){t.status(401).json({message:"Unauthorized"});return}s[0].password===o?t.status(200).json({message:"Login successful"}):t.status(401).json({message:"Unauthorized"})})}},53922:function(e,t,s){"use strict";let r=s(58195);t.getAllMattresses=(e,t)=>{r.query("SELECT * FROM Mattresses",(e,s)=>{if(e)return t.status(500).json({error:e.message});t.status(200).json(s)})},t.getMattressById=(e,t)=>{let{id:s}=e.params;r.query("SELECT * FROM Mattresses WHERE id = ?",[s],(e,s)=>e?t.status(500).json({error:e.message}):0===s.length?t.status(404).json({message:"Mattress not found"}):void t.status(200).json(s[0]))},t.createMattress=(e,t)=>{let{name:s,price:o,discount:a,category:u,size:c,image:d,hoverImage:n,description:i,firmness:l,Type:g}=e.body;r.query("INSERT INTO Mattresses (name, price, discount, category, size, image, hoverImage, description, firmness, Type ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?,?)",[s,o,a,u,c,d,n,i,l,g],(e,s)=>{if(e)return t.status(500).json({error:e.message});t.status(201).json({message:"Mattress created successfully",id:s.insertId})})},t.updateMattress=(e,t)=>{let{id:s}=e.params,{name:o,price:a,discount:u,category:c,size:d,image:n,hoverImage:i,description:l,firmness:g,Type:y}=e.body;r.query("UPDATE Mattresses SET name = ?, price = ?, discount = ?, category = ?, size = ?, image = ?, hoverImage = ?, description = ?, firmness = ? WHERE id = ?,Type =?",[o,a,u,c,d,n,i,l,g,y,s],(e,s)=>e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Mattress not found"}):void t.status(200).json({message:"Mattress updated successfully"}))},t.deleteMattress=(e,t)=>{let{id:s}=e.params;r.query("DELETE FROM Mattresses WHERE id = ?",[s],(e,s)=>e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Mattress not found"}):void t.status(200).json({message:"Mattress deleted successfully"}))}},16894:function(e,t,s){"use strict";let r=s(58195);t.getAllNestedSubcategories=(e,t)=>{r.query("SELECT * FROM Nested_Subcategories",(e,s)=>{if(e)throw e;t.json(s)})},t.createNestedSubcategory=(e,t)=>{let{name:s,subcategoryId:o}=e.body;r.query("INSERT INTO Nested_Subcategories (name, subcategory_id) VALUES (?, ?)",[s,o],(e,s)=>{if(e)throw e;t.status(201).send("Nested subcategory created successfully")})},t.updateNestedSubcategory=(e,t)=>{let s=e.params.id,{name:o,subcategoryId:a}=e.body;r.query("UPDATE Nested_Subcategories SET name = ?, subcategory_id = ? WHERE id = ?",[o,a,s],(e,s)=>{if(e)throw e;t.send("Nested subcategory updated successfully")})},t.deleteNestedSubcategory=(e,t)=>{let s=e.params.id;r.query("DELETE FROM Nested_Subcategories WHERE id = ?",[s],(e,s)=>{if(e)throw e;t.send("Nested subcategory deleted successfully")})}},66051:function(e,t,s){"use strict";let r=s(58195);t.createProduct=(e,t)=>{r.query("INSERT INTO products (name,description, price, image_url, discount, discount_price, category_id, subcategory_id, nested_subcategory_id) VALUES (?,?,?,?,?,?,?,?,?)",[name,description,price,image_url,discount,discount_price,categoryId,subcategoryId,nestedSubcategoryId],(e,s)=>{e?t.status(500).json({error:e.message}):t.status(201).json({message:"Product created successfully",productId:s.insertId})})},t.getAllProducts=(e,t)=>{r.query("SELECT * FROM products",(e,s)=>{e?t.status(500).json({error:e.message}):t.status(200).json(s)})},t.getProductById=(e,t)=>{let s=e.params.id;r.query("SELECT * FROM products WHERE id = ?",[s],(e,s)=>{e?t.status(500).json({error:e.message}):0===s.length?t.status(404).json({message:"Product not found"}):t.status(200).json(s[0])})},t.updateProductById=(e,t)=>{let s=e.params.id,{name:o,description:a,price:u,image_url:c,discount:d,discount_price:n,category_id:i,subcategory_id:l,nested_subcategory_id:g}=e.body;r.query("UPDATE products SET name=?, description=?, price=?, image_url=?, discount=?, discount_price=?, category_id=?, subcategory_id=?, nested_subcategory_id=? WHERE id=?",[o,a,u,c,d,n,i,l,g,s],(e,s)=>{e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Product not found"}):t.status(200).json({message:"Product updated successfully"})})},t.deleteProductById=(e,t)=>{let s=e.params.id;r.query("DELETE FROM products WHERE id=?",[s],(e,s)=>{e?t.status(500).json({error:e.message}):0===s.affectedRows?t.status(404).json({message:"Product not found"}):t.status(200).json({message:"Product deleted successfully"})})},t.getProductsByCategory=(e,t)=>{let s=e.params.categoryId;r.query("SELECT * FROM Products WHERE category_id = ?",[s],(e,s)=>{if(e)throw e;t.json(s)})},t.getProductsBySubcategory=(e,t)=>{let s=e.params.subcategoryId;r.query("SELECT * FROM Products WHERE subcategory_id = ?",[s],(e,s)=>{if(e)throw e;t.json(s)})},t.getProductsByNestedSubcategory=(e,t)=>{let s=e.params.nestedSubcategoryId;r.query("SELECT * FROM Products WHERE nested_subcategory_id = ?",[s],(e,s)=>{if(e)throw e;t.json(s)})}},22072:function(e,t,s){"use strict";let r=s(12308);e.exports={getAllSales:(e,t)=>{r.getAll((e,s)=>{e?t.status(500).json({error:e}):t.status(200).json(s)})},getSaleById:(e,t)=>{let{id:s}=e.params;r.getById(s,(e,s)=>{e?t.status(500).json({error:e}):0===s.length?t.status(404).json({message:"Sale not found"}):t.status(200).json(s[0])})},createSale:(e,t)=>{let s=e.body;r.create(s,(e,r)=>{e?t.status(500).json({error:e}):t.status(201).json({id:r.insertId,...s})})},updateSale:(e,t)=>{let{id:s}=e.params,o=e.body;r.update(s,o,e=>{e?t.status(500).json({error:e}):t.status(200).json({message:"Sale updated successfully"})})},deleteSale:(e,t)=>{let{id:s}=e.params;r.delete(s,e=>{e?t.status(500).json({error:e}):t.status(200).json({message:"Sale deleted successfully"})})}}},24353:function(e,t,s){"use strict";let r=s(58195);t.getAllSubcategories=(e,t)=>{r.query("SELECT * FROM Subcategories",(e,s)=>{if(e)throw e;t.json(s)})},t.createSubcategory=(e,t)=>{let{name:s,categoryId:o}=e.body;r.query("INSERT INTO Subcategories (name, category_id) VALUES (?, ?)",[s,o],(e,s)=>{if(e)throw e;t.status(201).send("Subcategory created successfully")})},t.updateSubcategory=(e,t)=>{let s=e.params.id,{name:o,categoryId:a}=e.body;r.query("UPDATE Subcategories SET name = ?, category_id = ? WHERE id = ?",[o,a,s],(e,s)=>{if(e)throw e;t.send("Subcategory updated successfully")})},t.deleteSubcategory=(e,t)=>{let s=e.params.id;r.query("DELETE FROM Subcategories WHERE id = ?",[s],(e,s)=>{if(e)throw e;t.send("Subcategory deleted successfully")})}},58195:function(e,t,s){"use strict";var r=s(83454);s(59738).config();let o=s(4426).createConnection({host:r.env.DB_HOST,user:r.env.DB_USER,password:r.env.DB_PASSWORD,database:r.env.DB_NAME});o.connect(e=>{if(e)throw e;console.log("Connected to MySQL database")}),e.exports=o},54205:function(e,t,s){"use strict";let r=s(58195);e.exports={create:(e,t)=>{r.query("INSERT INTO accessories (name, description, quantity, created_date, updated_date, star, price, actual_price, discount, title, image, hoverImage, brand, Type) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)",[e.name,e.description,e.quantity,new Date,new Date,e.star,e.price,e.actual_price,e.discount,e.title,e.image,e.hoverImage,e.brand,e.Type],(e,s,r)=>e?t(e):t(null,s))},getAll:e=>{r.query("SELECT * FROM accessories",(t,s,r)=>t?e(t):e(null,s))},getById:(e,t)=>{r.query("SELECT * FROM accessories WHERE id = ?",[e],(e,s,r)=>e?t(e):t(null,s[0]))},updateById:(e,t,s)=>{r.query("UPDATE accessories SET name = ?, description = ?, quantity = ?, updated_date = ?, star = ?, price = ?, actual_price = ?, discount = ?, title = ?, image = ?, hoverImage = ?, brand = ?, Type = ? WHERE id = ?",[t.name,t.description,t.quantity,new Date,t.star,t.price,t.actual_price,t.discount,t.title,t.image,t.hoverImage,t.brand,t.Type,e],(e,t,r)=>e?s(e):s(null,t))},deleteById:(e,t)=>{r.query("DELETE FROM accessories WHERE id = ?",[e],(e,s,r)=>e?t(e):t(null,s))}}},12308:function(e,t,s){"use strict";let r=s(58195);e.exports={getAll:e=>{r.query("SELECT * FROM sale",e)},getById:(e,t)=>{r.query("SELECT * FROM sale WHERE id = ?",[e],t)},create:(e,t)=>{r.query("INSERT INTO sale SET ?",e,t)},update:(e,t,s)=>{r.query("UPDATE sale SET ? WHERE id = ?",[t,e],s)},delete:(e,t)=>{r.query("DELETE FROM sale WHERE id = ?",[e],t)}}},44995:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(36358);r.get("/",o.getAllAccessories),r.get("/:id",o.getAccessoryById),r.post("/",o.createAccessory),r.put("/:id",o.updateAccessory),r.delete("/:id",o.deleteAccessory),e.exports=r},99239:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(71320);r.get("/",o.getAllBeds),r.get("/:id",o.getBedById),r.post("/",o.createBed),r.put("/:id",o.updateBed),r.delete("/:id",o.deleteBed),e.exports=r},94110:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(96889),a=s(51370),u=s(1864),c=a.diskStorage({destination:function(e,t,s){s(null,"public/")},filename:function(e,t,s){s(null,"".concat(Date.now(),"_").concat(u.basename(t.originalname)))}}),d=a({storage:c});r.get("/categories",o.getAllCategories),r.post("/categories",d.single("image"),o.createCategory),r.put("/categories/:id",d.single("image"),o.updateCategory),r.delete("/categories/:id",o.deleteCategory),e.exports=r},42155:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(74271);r.post("/login",o.login),e.exports=r},68009:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(53922);r.get("/",o.getAllMattresses),r.get("/:id",o.getMattressById),r.post("/",o.createMattress),r.put("/:id",o.updateMattress),r.delete("/:id",o.deleteMattress),e.exports=r},73312:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(16894);r.get("/nestedsubcategories",o.getAllNestedSubcategories),r.post("nestedsubcategories",o.createNestedSubcategory),r.put("/nestedsubcategories/:id",o.updateNestedSubcategory),r.delete("/nestedsubcategories/:id",o.deleteNestedSubcategory),e.exports=r},3819:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(66051);r.post("/products",o.createProduct),r.get("/products",o.getAllProducts),r.get("/products/:id",o.getProductById),r.put("/products/:id",o.updateProductById),r.delete("/products/:id",o.deleteProductById),e.exports=r},54826:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(22072);r.get("/",o.getAllSales),r.get("/:id",o.getSaleById),r.post("/",o.createSale),r.put("/:id",o.updateSale),r.delete("/:id",o.deleteSale),e.exports=r},74195:function(e,t,s){"use strict";let r=s(99268).Router(),o=s(24353);r.get("/subcategories",o.getAllSubcategories),r.post("/subcategories",o.createSubcategory),r.put("/subcategories/:id",o.updateSubcategory),r.delete("/subcategories/:id",o.deleteSubcategory),e.exports=r},92285:function(e,t,s){var r=s(83454);let o=s(99268),a=s(10046);s(59738).config();let{swaggerUi:u,specs:c}=s(49995),d=s(3819),n=s(94110),i=s(74195),l=s(73312),g=s(42155),y=s(68009),p=s(99239),E=s(44995),f=s(54826),m=s(17846),S=s(38284)(r.env.STRIPE_SECRET_KEY),b=o(),R=r.env.PORT||5e3;b.use(a.json()),b.use(m({origin:"*",credentials:!0,optionsSuccessStatus:200}));let T="/api/v1";b.use("/api-docs",u.serve,u.setup(c)),b.use(T+"/products",d),b.use(T+"/categories",n),b.use(T+"/subcategories",i),b.use(T+"/nestedsubcategories",l),b.use(T+"/auth",g),b.use(T+"/mattresses",y),b.use(T+"/beds",p),b.use(T+"/accessories",E),b.use(T+"/sales",f),b.post("".concat(T,"/payment"),async(e,t)=>{let{paymentMethodId:s,amount:r,currency:o,paymentId:a,billingDetails:u}=e.body;try{let e=await S.paymentIntents.create({amount:r,currency:o,payment_method:s,description:"Payment for Payment ID: ".concat(a),confirm:!0,metadata:{paymentId:a},receipt_email:u.email});t.status(200).json({success:!0,message:"Payment processed successfully",paymentIntent:e})}catch(e){t.status(400).json({success:!1,message:"Payment failed: ".concat(e.message)})}}),b.listen(R,()=>{console.log("Server is running on port ".concat(R))})},49995:function(e,t,s){"use strict";let r=s(2770),o=s(80701),a=r({swaggerDefinition:{openapi:"3.0.0",info:{title:"Your API Documentation",version:"1.0.0",description:"Documentation for your APIs"},servers:[{url:"http://localhost:5000",description:"Development server"}]},apis:["./routes/*.js"]});e.exports={swaggerUi:o,specs:a}},30803:function(e){function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=30803,e.exports=t},33471:function(){},76647:function(){},19527:function(){},69331:function(){},13432:function(){},24654:function(){},52361:function(){},94616:function(){}},function(e){e.O(0,[714,54,498,888,774,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);